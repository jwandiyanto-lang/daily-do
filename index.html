<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
  <meta name="theme-color" content="#FFFFFF">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="default">
  <meta name="description" content="Your personal AI-powered finance manager">
  <title>Finance App</title>

  <link rel="manifest" href="manifest.json">
  <link rel="icon" type="image/png" sizes="192x192" href="icons/icon-192.png">
  <link rel="apple-touch-icon" href="icons/apple-touch-icon.png">
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet">
  <style>
    * { box-sizing: border-box; margin: 0; padding: 0; }

    body {
      font-family: 'Inter', -apple-system, sans-serif;
      background: #FFFFFF;
      min-height: 100vh;
      color: #1a1a1a;
      padding: 20px;
      padding-bottom: 100px;
    }

    .header { text-align: center; padding: 30px 0 24px; }
    .greeting { color: #666; font-size: 0.9rem; margin-bottom: 6px; }
    .app-title { font-size: 2rem; font-weight: 800; color: #1a1a1a; }
    .app-title span { color: #10B981; }

    .balance-card {
      background: linear-gradient(135deg, #10B981 0%, #059669 100%);
      border-radius: 24px;
      padding: 32px 24px;
      margin-bottom: 20px;
      text-align: center;
      box-shadow: 0 10px 40px rgba(16, 185, 129, 0.3);
    }
    .balance-label { font-size: 0.85rem; color: rgba(255,255,255,0.8); margin-bottom: 8px; font-weight: 500; }
    .balance-amount { font-size: 2.8rem; font-weight: 800; color: #fff; }
    .balance-trend { margin-top: 10px; font-size: 0.85rem; color: rgba(255,255,255,0.9); font-weight: 500; }

    .stats-row {
      display: grid;
      grid-template-columns: repeat(2, 1fr);
      gap: 12px;
      margin-bottom: 28px;
    }

    .stat-card {
      background: #F8FAFC;
      border: 1px solid #E2E8F0;
      border-radius: 16px;
      padding: 18px;
    }
    .stat-label { font-size: 0.7rem; color: #64748B; text-transform: uppercase; letter-spacing: 0.5px; margin-bottom: 6px; font-weight: 600; }
    .stat-value { font-size: 1.4rem; font-weight: 700; color: #1E293B; }
    .stat-value.green { color: #10B981; }
    .stat-value.red { color: #EF4444; }
    .stat-value.blue { color: #3B82F6; }

    .section-title {
      font-size: 0.75rem;
      font-weight: 700;
      color: #64748B;
      text-transform: uppercase;
      letter-spacing: 0.5px;
      margin-bottom: 14px;
    }

    .quick-actions {
      display: flex;
      flex-direction: column;
      gap: 12px;
      margin-bottom: 28px;
    }

    .quick-action {
      display: flex;
      align-items: center;
      gap: 16px;
      padding: 18px;
      background: #F8FAFC;
      border: 1px solid #E2E8F0;
      border-radius: 16px;
      text-decoration: none;
      color: inherit;
      transition: all 0.2s;
    }
    .quick-action:hover { background: #F1F5F9; transform: translateY(-2px); box-shadow: 0 4px 12px rgba(0,0,0,0.05); }
    .quick-action:active { transform: translateY(0); }
    .quick-action .icon {
      width: 48px;
      height: 48px;
      border-radius: 14px;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 1.4rem;
    }
    .quick-action .icon.green { background: rgba(16, 185, 129, 0.1); }
    .quick-action .icon.blue { background: rgba(59, 130, 246, 0.1); }
    .quick-action .icon.purple { background: rgba(139, 92, 246, 0.1); }
    .quick-action .text { flex: 1; }
    .quick-action .title { font-weight: 600; font-size: 1rem; color: #1E293B; margin-bottom: 2px; }
    .quick-action .desc { font-size: 0.8rem; color: #64748B; }
    .quick-action .arrow { color: #94A3B8; font-size: 1.2rem; }

    .tip-card {
      background: linear-gradient(135deg, #FEF3C7 0%, #FDE68A 100%);
      border-radius: 16px;
      padding: 18px;
      display: flex;
      align-items: flex-start;
      gap: 14px;
    }
    .tip-icon { font-size: 1.5rem; }
    .tip-content { flex: 1; }
    .tip-title { font-weight: 700; font-size: 0.85rem; margin-bottom: 4px; color: #92400E; }
    .tip-text { font-size: 0.85rem; color: #A16207; line-height: 1.5; }

    .bottom-nav {
      position: fixed;
      bottom: 0;
      left: 0;
      right: 0;
      background: #FFFFFF;
      border-top: 1px solid #E2E8F0;
      padding: 10px 0 24px;
      z-index: 50;
    }

    .nav-items {
      display: flex;
      justify-content: space-around;
      list-style: none;
      max-width: 500px;
      margin: 0 auto;
    }
    .nav-link {
      display: flex;
      flex-direction: column;
      align-items: center;
      text-decoration: none;
      color: #94A3B8;
      padding: 8px 24px;
      border-radius: 12px;
      transition: all 0.2s;
    }
    .nav-link.active { color: #10B981; background: rgba(16, 185, 129, 0.1); }
    .nav-icon { font-size: 1.4rem; margin-bottom: 4px; }
    .nav-label { font-size: 0.7rem; font-weight: 600; }
  </style>
</head>
<body>
  <div class="header">
    <p class="greeting" id="greeting">Good morning</p>
    <h1 class="app-title">My <span>Finance</span></h1>
  </div>

  <!-- Balance Card -->
  <div class="balance-card">
    <div class="balance-label">Current Balance</div>
    <div class="balance-amount" id="balance">$0</div>
    <div class="balance-trend" id="trend"></div>
  </div>

  <!-- Stats -->
  <div class="stats-row">
    <div class="stat-card">
      <div class="stat-label">Income</div>
      <div class="stat-value green" id="income">$0</div>
    </div>
    <div class="stat-card">
      <div class="stat-label">Expenses</div>
      <div class="stat-value red" id="expenses">$0</div>
    </div>
    <div class="stat-card">
      <div class="stat-label">Funds Saved</div>
      <div class="stat-value blue" id="fundsSaved">$0</div>
    </div>
    <div class="stat-card">
      <div class="stat-label">Active Goals</div>
      <div class="stat-value" id="fundsCount">0</div>
    </div>
  </div>

  <!-- Quick Actions -->
  <div class="section-title">Quick Actions</div>
  <div class="quick-actions">
    <a href="finance/summary.html" class="quick-action">
      <span class="icon green">üí∏</span>
      <div class="text">
        <div class="title">Add Transaction</div>
        <div class="desc">Record income or expense</div>
      </div>
      <span class="arrow">‚Üí</span>
    </a>
    <a href="finance/summary.html" class="quick-action" onclick="localStorage.setItem('openTab', 'funds')">
      <span class="icon blue">üéØ</span>
      <div class="text">
        <div class="title">Manage Funds</div>
        <div class="desc">Track your savings goals</div>
      </div>
      <span class="arrow">‚Üí</span>
    </a>
    <a href="finance/summary.html" class="quick-action" onclick="localStorage.setItem('openTab', 'advisor')">
      <span class="icon purple">ü§ñ</span>
      <div class="text">
        <div class="title">AI Financial Advisor</div>
        <div class="desc">Get personalized guidance</div>
      </div>
      <span class="arrow">‚Üí</span>
    </a>
  </div>

  <!-- Tip -->
  <div class="tip-card">
    <span class="tip-icon">üí°</span>
    <div class="tip-content">
      <div class="tip-title">Financial Tip</div>
      <div class="tip-text" id="tipText">Start by tracking all your expenses for a week to understand your spending patterns.</div>
    </div>
  </div>

  <!-- Bottom Nav -->
  <nav class="bottom-nav">
    <ul class="nav-items">
      <li><a href="index.html" class="nav-link active"><span class="nav-icon">üè†</span><span class="nav-label">Home</span></a></li>
      <li><a href="finance/summary.html" class="nav-link"><span class="nav-icon">üí∞</span><span class="nav-label">Finance</span></a></li>
    </ul>
  </nav>

  <script src="scripts/memory.js"></script>
  <script>
    // Set greeting based on time
    function setGreeting() {
      const hour = new Date().getHours();
      let greeting = 'Good evening';
      if (hour < 12) greeting = 'Good morning';
      else if (hour < 18) greeting = 'Good afternoon';
      document.getElementById('greeting').textContent = greeting;
    }
    setGreeting();

    // Format currency
    function formatCurrency(amount) {
      return '$' + new Intl.NumberFormat('en-US', { minimumFractionDigits: 0, maximumFractionDigits: 0 }).format(amount);
    }

    // Load financial data
    function loadFinancialData() {
      const transactions = Memory.get('finance', 'transactions') || [];
      const funds = Memory.get('finance', 'funds') || [];

      let income = 0, expense = 0;
      transactions.forEach(t => {
        if (t.type === 'income') income += t.amount;
        else expense += t.amount;
      });

      const balance = income - expense;
      const fundsSaved = funds.reduce((sum, f) => sum + (f.current || 0), 0);

      document.getElementById('balance').textContent = formatCurrency(balance);
      document.getElementById('income').textContent = formatCurrency(income);
      document.getElementById('expenses').textContent = formatCurrency(expense);
      document.getElementById('fundsSaved').textContent = formatCurrency(fundsSaved);
      document.getElementById('fundsCount').textContent = funds.length;

      // Set trend
      const trend = document.getElementById('trend');
      if (transactions.length === 0) {
        trend.textContent = 'Start tracking to see trends';
      } else if (balance > 0) {
        trend.textContent = '‚Üë You\'re in the green!';
      } else if (balance < 0) {
        trend.textContent = '‚Üì Spending exceeds income';
      } else {
        trend.textContent = 'Breaking even';
      }
    }
    loadFinancialData();

    // Random financial tips
    const tips = [
      'Start by tracking all your expenses for a week to understand your spending patterns.',
      'Aim to save at least 20% of your income each month.',
      'Build an emergency fund that covers 3-6 months of expenses.',
      'Review your subscriptions monthly - cancel what you don\'t use.',
      'Pay yourself first: set aside savings before spending.',
      'Use the 50/30/20 rule: 50% needs, 30% wants, 20% savings.',
      'Automate your savings to make it effortless.',
      'Track your net worth monthly to see your progress.'
    ];
    document.getElementById('tipText').textContent = tips[Math.floor(Math.random() * tips.length)];

    // Register Service Worker
    if ('serviceWorker' in navigator) {
      navigator.serviceWorker.register('./sw.js');
    }
  </script>
</body>
</html>
